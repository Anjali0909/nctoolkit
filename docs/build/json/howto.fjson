{
    "body": "<div class=\"section\" id=\"How-to-guide\">\n<h1>How to guide<a class=\"headerlink\" href=\"#How-to-guide\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>This guide will show how to carry out key nchack operations. We will use a sea surface temperature data set and a depth-resolved ocean temperature data set. The data sets can be downloaded using wget as follows:</p>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[37]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">import</span> <span class=\"nn\">nchack</span> <span class=\"k\">as</span> <span class=\"nn\">nc</span>\n<span class=\"kn\">import</span> <span class=\"nn\">pandas</span> <span class=\"k\">as</span> <span class=\"nn\">pd</span>\n<span class=\"kn\">import</span> <span class=\"nn\">xarray</span> <span class=\"k\">as</span> <span class=\"nn\">xr</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[38]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"ch\">#! wget ftp://ftp.cdc.noaa.gov/Datasets/COBE2/sst.mon.mean.nc</span>\n<span class=\"c1\">#clear_output()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-select-years-and-months\">\n<h2>How to select years and months<a class=\"headerlink\" href=\"#How-to-select-years-and-months\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If we want to select specific years and months we can use the select_years and select_months method</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[39]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">select_years</span><span class=\"p\">(</span><span class=\"mi\">1960</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">select_months</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">times</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[39]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>0    1960-01-01T00:00:00\ndtype: object\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-clip-to-a-region\">\n<h2>How to clip to a region<a class=\"headerlink\" href=\"#How-to-clip-to-a-region\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If you want to clip the data to a specific longitude and latitude box, we can use clip, with the longitude and latitude range given by lon and lat.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[40]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">clip</span><span class=\"p\">(</span><span class=\"n\">lon</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">],</span> <span class=\"n\">lat</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">40</span><span class=\"p\">,</span> <span class=\"mi\">70</span><span class=\"p\">])</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">(</span><span class=\"n\">dim</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;time&quot;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area stderr docutils container\">\n<div class=\"highlight\"><pre>\n/users/modellers/rwi/anaconda3/lib/python3.7/site-packages/xarray/core/nanops.py:140: RuntimeWarning: Mean of empty slice\n  return np.nanmean(a, axis=axis, dtype=dtype)\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[40]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;matplotlib.collections.QuadMesh at 0x7f24744574a8&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_6_2.png\" src=\"_images/howto_6_2.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-rename-a-variable\">\n<h2>How to rename a variable<a class=\"headerlink\" href=\"#How-to-rename-a-variable\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If we want to rename a variable we use the rename method, and supply a dictionary where the key, value pairs are the original and new names</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[41]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">variables</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">rename</span><span class=\"p\">({</span><span class=\"s2\">&quot;sst&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;temperature&quot;</span><span class=\"p\">})</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">variables</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[41]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;sst&#39;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[41]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;temperature&#39;]\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-create-new-variables\">\n<h2>How to create new variables<a class=\"headerlink\" href=\"#How-to-create-new-variables\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>New variables can be created using arithmetic operations using either mutate or transmute. The mutate method will maintain the original variables, whereas transmute will not. This method requires a dictionary, where the key, values pairs are the names of the new variables and the arithemtic operations to perform. The example below shows how to create a new variable with</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[42]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">mutate</span><span class=\"p\">({</span><span class=\"s2\">&quot;sst_k&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sst+273.15&quot;</span><span class=\"p\">})</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">variables</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[42]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;sst&#39;, &#39;sst_k&#39;]\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-a-spatial-average\">\n<h2>How to calculate a spatial average<a class=\"headerlink\" href=\"#How-to-calculate-a-spatial-average\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>You can calculate a spatial average using the spatial_mean method. There are additional methods for maximums etc.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[43]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">spatial_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[43]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&lt;matplotlib.lines.Line2D at 0x7f247f68eda0&gt;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_12_1.png\" src=\"_images/howto_12_1.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-an-annual-mean\">\n<h2>How to calculate an annual mean<a class=\"headerlink\" href=\"#How-to-calculate-an-annual-mean\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>You can calculate an annual mean using the annual_mean method.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[44]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">spatial_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">annual_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[44]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&lt;matplotlib.lines.Line2D at 0x7f247f679320&gt;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_14_1.png\" src=\"_images/howto_14_1.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-a-rolling-average\">\n<h2>How to calculate a rolling average<a class=\"headerlink\" href=\"#How-to-calculate-a-rolling-average\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>You can calculate a rolling mean using the rolling_mean method, with the window argument providing the number of time steps to average over. There are additional methods for rolling sums etc. The code below will calculate a rolling mean of global SST using a 20 year window.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[45]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">spatial_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">annual_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">rolling_mean</span><span class=\"p\">(</span><span class=\"mi\">20</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[45]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&lt;matplotlib.lines.Line2D at 0x7f247f5f6198&gt;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_16_1.png\" src=\"_images/howto_16_1.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-temporal-anomalies\">\n<h2>How to calculate temporal anomalies<a class=\"headerlink\" href=\"#How-to-calculate-temporal-anomalies\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>You can calculate annual temporal anomalies using the anomaly_annual method. This requires a baseline period.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[46]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">spatial_mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">anomaly_annual</span><span class=\"p\">(</span><span class=\"n\">baseline</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1960</span><span class=\"p\">,</span> <span class=\"mi\">1979</span><span class=\"p\">)))</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">anomaly</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;cdo(1) merge: Process started\\nWarning: Duplicate entry of parameter -1 in /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmplo0be6ot.nc!\\ncdo(1) merge: Processed 170 values from 2 variables over 170 timesteps.\\ncdo    expr: Processed 170 values from 2 variables [0.02s 414MB].\\n&#39;\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[46]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&lt;matplotlib.lines.Line2D at 0x7f247f54dba8&gt;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_18_2.png\" src=\"_images/howto_18_2.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-split-files-in-trackers\">\n<h2>How to split files in trackers<a class=\"headerlink\" href=\"#How-to-split-files-in-trackers\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Files within a tracker can be split by year (split_year), day (split_day), year and month (split_year_month) or season (split_season). If we wanted to split by year and we can use the split_year method</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[47]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">split_year</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">size</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nNumber of files in ensemble: 169\nEnsemble size: 530.549474 MB\nSmallest file /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmpra17b_n2.nc2018.nc has size 3.139346 MB\nLargest file /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmpra17b_n2.nc2018.nc has size 3.139346 MB\n</pre></div></div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-merge-files-in-time\">\n<h2>How to merge files in time<a class=\"headerlink\" href=\"#How-to-merge-files-in-time\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>We can merge files based on time using merge_time. The code below splits the netcdf files by year and then merges them using merge_time.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[48]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">split_year</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">size</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">merge_time</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">size</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nNumber of files in ensemble: 169\nEnsemble size: 530.549474 MB\nSmallest file /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmpfjvhyato.nc2018.nc has size 3.139346 MB\nLargest file /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmpfjvhyato.nc2018.nc has size 3.139346 MB\nNumber of files: 1\nFile size: 525.835353 MB\n</pre></div></div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-do-variables-based-merging\">\n<h2>How to do variables based merging<a class=\"headerlink\" href=\"#How-to-do-variables-based-merging\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If we have two more more files that have the same time steps, but different variables, we can merge them using merge. The code below will first create a tracker with a netcdf file with sst in K, and it will then create a new tracker with this netcd file and the original, and then merge them.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[49]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker1</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker2</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker2</span><span class=\"o\">.</span><span class=\"n\">transmute</span><span class=\"p\">({</span><span class=\"s2\">&quot;sst_k&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sst+273.15&quot;</span><span class=\"p\">})</span>\n<span class=\"n\">new_tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">([</span><span class=\"n\">tracker1</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"p\">,</span> <span class=\"n\">tracker2</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"p\">])</span>\n<span class=\"n\">new_tracker</span><span class=\"o\">.</span><span class=\"n\">current</span>\n<span class=\"n\">new_tracker</span><span class=\"o\">.</span><span class=\"n\">merge</span><span class=\"p\">()</span>\n<span class=\"n\">new_tracker</span><span class=\"o\">.</span><span class=\"n\">variables</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[49]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;/tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmptz6jhrv2.nc&#39;,\n &#39;sst.mon.mean.nc&#39;]\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;Warning: Duplicate entry of parameter -1 in sst.mon.mean.nc!\\ncdo    merge: Processed 2 variables over 4056 timesteps [1.21s 414MB].\\n&#39;\n</pre></div></div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[49]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;sst_k&#39;, &#39;sst&#39;]\n</pre></div>\n</div>\n</div>\n<p>In some cases we will have two or more trackers we want to merge. In this case we can use the merge_trackers function as follows:</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[50]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker1</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker2</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker2</span><span class=\"o\">.</span><span class=\"n\">transmute</span><span class=\"p\">({</span><span class=\"s2\">&quot;sst_k&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sst+273.15&quot;</span><span class=\"p\">})</span>\n<span class=\"n\">new_tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">merge_trackers</span><span class=\"p\">(</span><span class=\"n\">tracker1</span><span class=\"p\">,</span> <span class=\"n\">tracker2</span><span class=\"p\">)</span>\n<span class=\"n\">new_tracker</span><span class=\"o\">.</span><span class=\"n\">variables</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;Warning: Duplicate entry of parameter -1 in /tmp/nchackglwwvolhnchacknchackglwwvolhnchacktmp141j_swx.nc!\\ncdo    merge: Processed 2 variables over 4056 timesteps [1.30s 414MB].\\n&#39;\n</pre></div></div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[50]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>[&#39;sst&#39;, &#39;sst_k&#39;]\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-horizontally-regrid-a-tracker\">\n<h2>How to horizontally regrid a tracker<a class=\"headerlink\" href=\"#How-to-horizontally-regrid-a-tracker\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Variables can be regridded horizontally using regrid. This method requires the new grid to be defined. This can either be a pandas data frame, with lon/lat as columns, an xarray object, a netcdfile or a tracker. I will demonstrate all three methods by regridding SST to the North Atlantic. Let\u2019s begin by getting a grid for the North Atlantic.</p>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[51]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">new_grid</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">clip</span><span class=\"p\">(</span><span class=\"n\">lon</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"mi\">20</span><span class=\"p\">],</span> <span class=\"n\">lat</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"mi\">70</span><span class=\"p\">])</span>\n<span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">select_months</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">select_years</span><span class=\"p\">(</span> <span class=\"mi\">2000</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<p>First, we will use the new tracker itself to do the regridding. I will calculate mean SST using the original data, and then regrid to the North Atlantic.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[52]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"o\">%%time</span>\n<span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">regrid</span><span class=\"p\">(</span><span class=\"n\">grid</span> <span class=\"o\">=</span> <span class=\"n\">new_grid</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;Warning: HDF5 support not compiled in!\\ncdo    remap: Processed 64800 values from 1 variable over 1 timestep [0.01s 414MB].\\n&#39;\nCPU times: user 49.5 ms, sys: 52.4 ms, total: 102 ms\nWall time: 1.25 s\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[52]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;matplotlib.collections.QuadMesh at 0x7f247f4eaa20&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_30_2.png\" src=\"_images/howto_30_2.png\" />\n</div>\n</div>\n<p>We can also do this using the netcdf, which is new_grid.current</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[53]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"o\">%%time</span>\n<span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">regrid</span><span class=\"p\">(</span><span class=\"n\">grid</span> <span class=\"o\">=</span> <span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;Warning: HDF5 support not compiled in!\\ncdo    remap: Processed 64800 values from 1 variable over 1 timestep [0.01s 415MB].\\n&#39;\nCPU times: user 51.3 ms, sys: 21.9 ms, total: 73.3 ms\nWall time: 1.11 s\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[53]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;matplotlib.collections.QuadMesh at 0x7f247f401c50&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_32_2.png\" src=\"_images/howto_32_2.png\" />\n</div>\n</div>\n<p>In a similar way we can read the new_grid in as an xarray data set.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[54]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"o\">%%time</span>\n<span class=\"n\">na_grid</span> <span class=\"o\">=</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">open_dataset</span><span class=\"p\">(</span><span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">regrid</span><span class=\"p\">(</span><span class=\"n\">grid</span> <span class=\"o\">=</span> <span class=\"n\">na_grid</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCDO warning:b&#39;Warning: HDF5 support not compiled in!\\ncdo    remap: Processed 64800 values from 1 variable over 1 timestep [0.01s 415MB].\\n&#39;\nCPU times: user 59.6 ms, sys: 26 ms, total: 85.6 ms\nWall time: 1.23 s\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[54]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;matplotlib.collections.QuadMesh at 0x7f247f342b70&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_34_2.png\" src=\"_images/howto_34_2.png\" />\n</div>\n</div>\n<p>or we can use a pandas data frame. In this case I will convert the xarray data set to a data frame.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[55]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"o\">%%time</span>\n<span class=\"n\">na_grid</span> <span class=\"o\">=</span> <span class=\"n\">xr</span><span class=\"o\">.</span><span class=\"n\">open_dataset</span><span class=\"p\">(</span><span class=\"n\">new_grid</span><span class=\"o\">.</span><span class=\"n\">current</span><span class=\"p\">)</span>\n<span class=\"n\">na_grid</span> <span class=\"o\">=</span> <span class=\"n\">na_grid</span><span class=\"o\">.</span><span class=\"n\">to_dataframe</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">reset_index</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">loc</span><span class=\"p\">[:,[</span><span class=\"s2\">&quot;lon&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;lat&quot;</span><span class=\"p\">]]</span>\n<span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">mean</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">regrid</span><span class=\"p\">(</span><span class=\"n\">grid</span> <span class=\"o\">=</span> <span class=\"n\">na_grid</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<div class=\"highlight\"><pre>\nCPU times: user 76.8 ms, sys: 24.5 ms, total: 101 ms\nWall time: 1.24 s\n</pre></div></div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[55]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;matplotlib.collections.QuadMesh at 0x7f247f2e5ba8&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_36_2.png\" src=\"_images/howto_36_2.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-temporally-interpolate\">\n<h2>How to temporally interpolate<a class=\"headerlink\" href=\"#How-to-temporally-interpolate\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Temporal interpolation can be carried out using time_interp. This method requires a start date (start) of the format YYYY/MM/DD and an end date (end), and a temporal resolution (resolution), which is either 1 day (\u201cdaily\u201d), 1 week (\u201cweekly\u201d), 1 month (\u201cmonthly\u201d), or 1 year (\u201cyearly\u201d).</p>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[56]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">time_interp</span><span class=\"p\">(</span><span class=\"n\">start</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1990/01/01&quot;</span><span class=\"p\">,</span> <span class=\"n\">end</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1990/12/31&quot;</span><span class=\"p\">,</span> <span class=\"n\">resolution</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;daily&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-a-monthly-average-from-daily-data\">\n<h2>How to calculate a monthly average from daily data<a class=\"headerlink\" href=\"#How-to-calculate-a-monthly-average-from-daily-data\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If you have daily data, you can calculate a month average using monthly_mean. There are also methods for maximums etc.</p>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[60]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">time_interp</span><span class=\"p\">(</span><span class=\"n\">start</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1990/01/01&quot;</span><span class=\"p\">,</span> <span class=\"n\">end</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1990/12/31&quot;</span><span class=\"p\">,</span> <span class=\"n\">resolution</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;daily&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">monthly_mean</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nbinput nblast docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[ ]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span>\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-a-monthly-climatology\">\n<h2>How to calculate a monthly climatology<a class=\"headerlink\" href=\"#How-to-calculate-a-monthly-climatology\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>CDO outputs the date of the final month.</p>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[57]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">select_years</span><span class=\"p\">(</span><span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">1990</span><span class=\"p\">,</span> <span class=\"mi\">2000</span><span class=\"p\">)))</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">monthly_mean_climatology</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">col</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;time&quot;</span><span class=\"p\">,</span> <span class=\"n\">col_wrap</span> <span class=\"o\">=</span> <span class=\"mi\">3</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[57]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;xarray.plot.facetgrid.FacetGrid at 0x7f247f251860&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_43_1.png\" src=\"_images/howto_43_1.png\" />\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"How-to-calculate-a-seasonal-climatology\">\n<h2>How to calculate a seasonal climatology<a class=\"headerlink\" href=\"#How-to-calculate-a-seasonal-climatology\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"nbinput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[58]:\n</pre></div>\n</div>\n<div class=\"input_area highlight-ipython3 notranslate\"><div class=\"highlight\"><pre>\n<span></span><span class=\"n\">tracker</span> <span class=\"o\">=</span> <span class=\"n\">nc</span><span class=\"o\">.</span><span class=\"n\">open_data</span><span class=\"p\">(</span><span class=\"s2\">&quot;sst.mon.mean.nc&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">seasonal_mean_climatology</span><span class=\"p\">()</span>\n<span class=\"n\">tracker</span><span class=\"o\">.</span><span class=\"n\">to_xarray</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">sst</span><span class=\"o\">.</span><span class=\"n\">plot</span><span class=\"p\">(</span><span class=\"n\">col</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;time&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput docutils container\">\n<div class=\"prompt highlight-none notranslate\"><div class=\"highlight\"><pre><span></span>[58]:\n</pre></div>\n</div>\n<div class=\"output_area highlight-none notranslate\"><div class=\"highlight\"><pre>\n<span></span>&lt;xarray.plot.facetgrid.FacetGrid at 0x7f247ef5df98&gt;\n</pre></div>\n</div>\n</div>\n<div class=\"nboutput nblast docutils container\">\n<div class=\"prompt empty docutils container\">\n</div>\n<div class=\"output_area docutils container\">\n<img alt=\"_images/howto_45_1.png\" src=\"_images/howto_45_1.png\" />\n</div>\n</div>\n</div>\n</div>\n",
    "title": "How to guide",
    "sourcename": "howto.ipynb.txt",
    "current_page_name": "howto",
    "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">How to guide</a><ul>\n<li><a class=\"reference internal\" href=\"#How-to-select-years-and-months\">How to select years and months</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-clip-to-a-region\">How to clip to a region</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-rename-a-variable\">How to rename a variable</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-create-new-variables\">How to create new variables</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-a-spatial-average\">How to calculate a spatial average</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-an-annual-mean\">How to calculate an annual mean</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-a-rolling-average\">How to calculate a rolling average</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-temporal-anomalies\">How to calculate temporal anomalies</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-split-files-in-trackers\">How to split files in trackers</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-merge-files-in-time\">How to merge files in time</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-do-variables-based-merging\">How to do variables based merging</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-horizontally-regrid-a-tracker\">How to horizontally regrid a tracker</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-temporally-interpolate\">How to temporally interpolate</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-a-monthly-average-from-daily-data\">How to calculate a monthly average from daily data</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-a-monthly-climatology\">How to calculate a monthly climatology</a></li>\n<li><a class=\"reference internal\" href=\"#How-to-calculate-a-seasonal-climatology\">How to calculate a seasonal climatology</a></li>\n</ul>\n</li>\n</ul>\n",
    "page_source_suffix": ".ipynb"
}